{"ast":null,"code":"import _slicedToArray from\"C:/Users/16479/Desktop/Web Development/CalculatorV2/calculator/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useEffect,useState}from'react';import'./calculator.css';import{btns,BTN_ACTIONS}from'./btnConfig';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Calculator=function Calculator(){var btnsRef=useRef(null);var expRef=useRef(null);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),expression=_useState2[0],setExpression=_useState2[1];useEffect(function(){var btns=Array.from(btnsRef.current.querySelectorAll('button'));btns.forEach(function(e){return e.style.height=e.offsetWidth+'px';});},[]);var btnClick=function btnClick(item){var expDiv=expRef.current;if(item.action===BTN_ACTIONS.THEME)document.body.classList.toggle('dark');if(item.action===BTN_ACTIONS.ADD){addAnimSpan(item.display);var oper=item.display!=='x'?item.display:'*';setExpression(expression+oper);}if(item.action===BTN_ACTIONS.DELETE){expDiv.parentNode.querySelector('div:last-child').innerHTML='';expDiv.innerHTML='';setExpression('');}if(item.action===BTN_ACTIONS.CALC){if(expression.trim().length<=0)return;expDiv.parentNode.querySelector('div:last-child').remove();var cloneNode=expDiv.cloneNode(true);expDiv.parentNode.appendChild(cloneNode);var transform=\"translateY(\".concat(-(expDiv.offsetHeight+10)+'px',\") scale(0.4)\");try{var res=eval(expression);setExpression(res.toString());setTimeout(function(){cloneNode.style.transform=transform;expDiv.innerHTML='';addAnimSpan(Math.floor(res*100000000)/100000000);},200);}catch(_unused){setTimeout(function(){cloneNode.style.transform=transform;cloneNode.innerHTML='Syntax err';},200);}finally{console.log('calc complete');}}};var addAnimSpan=function addAnimSpan(content){var expDiv=expRef.current;var span=document.createElement('span');span.innerHTML=content;span.style.opacity='0';expDiv.appendChild(span);var width=span.offsetWidth+'px';span.style.width='0';setTimeout(function(){span.style.opacity='1';span.style.width=width;},100);};return/*#__PURE__*/_jsxs(\"div\",{className:\"calculator\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"calculator__result\",children:[/*#__PURE__*/_jsx(\"div\",{ref:expRef,className:\"calculator__result__exp\"}),/*#__PURE__*/_jsx(\"div\",{className:\"calculator__result__exp\"})]}),/*#__PURE__*/_jsx(\"div\",{ref:btnsRef,className:\"calculator__btns\",children:btns.map(function(item,index){return/*#__PURE__*/_jsx(\"button\",{className:item.class,onClick:function onClick(){return btnClick(item);},children:item.display},index);})})]});};export default Calculator;","map":{"version":3,"names":["React","useRef","useEffect","useState","btns","BTN_ACTIONS","jsx","_jsx","jsxs","_jsxs","Calculator","btnsRef","expRef","_useState","_useState2","_slicedToArray","expression","setExpression","Array","from","current","querySelectorAll","forEach","e","style","height","offsetWidth","btnClick","item","expDiv","action","THEME","document","body","classList","toggle","ADD","addAnimSpan","display","oper","DELETE","parentNode","querySelector","innerHTML","CALC","trim","length","remove","cloneNode","appendChild","transform","concat","offsetHeight","res","eval","toString","setTimeout","Math","floor","_unused","console","log","content","span","createElement","opacity","width","className","children","ref","map","index","class","onClick"],"sources":["C:/Users/16479/Desktop/Web Development/CalculatorV2/calculator/src/components/calculator/Calculator.jsx"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\r\n\r\nimport './calculator.css';\r\n\r\nimport { btns, BTN_ACTIONS } from './btnConfig';\r\n\r\nconst Calculator = () => {\r\n\r\n    const btnsRef = useRef(null);\r\n    const expRef = useRef(null);\r\n\r\n    const [expression, setExpression] = useState('');\r\n\r\n    useEffect(() => {\r\n        const btns = Array.from(btnsRef.current.querySelectorAll('button'));\r\n        btns.forEach(e => e.style.height = e.offsetWidth + 'px');\r\n    }, []);\r\n\r\n    const btnClick = (item) => {\r\n        const expDiv = expRef.current;\r\n\r\n        if (item.action === BTN_ACTIONS.THEME) document.body.classList.toggle('dark');\r\n\r\n        if (item.action === BTN_ACTIONS.ADD) {\r\n            addAnimSpan(item.display);\r\n\r\n            const oper = item.display !== 'x' ? item.display : '*';\r\n            setExpression(expression + oper);\r\n        }\r\n\r\n        if (item.action === BTN_ACTIONS.DELETE) {\r\n            expDiv.parentNode.querySelector('div:last-child').innerHTML = '';\r\n            expDiv.innerHTML = '';\r\n\r\n            setExpression('');\r\n        }\r\n\r\n        if (item.action === BTN_ACTIONS.CALC) {\r\n            if (expression.trim().length <= 0) return;\r\n\r\n            expDiv.parentNode.querySelector('div:last-child').remove();\r\n\r\n            const cloneNode = expDiv.cloneNode(true);\r\n            expDiv.parentNode.appendChild(cloneNode);\r\n\r\n            const transform = `translateY(${-(expDiv.offsetHeight + 10) + 'px'}) scale(0.4)`;\r\n\r\n            try {\r\n                let res = eval(expression);\r\n\r\n                setExpression(res.toString());\r\n                setTimeout(() => {\r\n                    cloneNode.style.transform = transform;\r\n                    expDiv.innerHTML = '';\r\n                    addAnimSpan(Math.floor(res * 100000000) / 100000000);\r\n                }, 200);\r\n            } catch {\r\n                setTimeout(() => {\r\n                    cloneNode.style.transform = transform;\r\n                    cloneNode.innerHTML = 'Syntax err';\r\n                }, 200);\r\n            } finally {\r\n                console.log('calc complete');\r\n            }\r\n        }\r\n    }\r\n\r\n    const addAnimSpan = (content) => {\r\n        const expDiv = expRef.current;\r\n        const span = document.createElement('span');\r\n\r\n        span.innerHTML = content;\r\n        span.style.opacity = '0';\r\n        expDiv.appendChild(span);\r\n\r\n        const width = span.offsetWidth + 'px';\r\n        span.style.width = '0';\r\n\r\n        setTimeout(() => {\r\n            span.style.opacity = '1';\r\n            span.style.width = width;\r\n        }, 100);\r\n    }\r\n\r\n    return (\r\n        <div className=\"calculator\">\r\n            <div className=\"calculator__result\">\r\n                <div ref={expRef} className=\"calculator__result__exp\"></div>\r\n                <div className=\"calculator__result__exp\"></div>\r\n            </div>\r\n            <div ref={btnsRef} className=\"calculator__btns\">\r\n                {\r\n                    btns.map((item, index) => (\r\n                        <button\r\n                            key={index}\r\n                            className={item.class}\r\n                            onClick={() => btnClick(item)}\r\n                        >\r\n                            {item.display}\r\n                        </button>\r\n                    ))\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Calculator;"],"mappings":"oJAAA,MAAO,CAAAA,KAAK,EAAIC,MAAM,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAE1D,MAAO,kBAAkB,CAEzB,OAASC,IAAI,CAAEC,WAAW,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEhD,GAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CAErB,GAAM,CAAAC,OAAO,CAAGV,MAAM,CAAC,IAAI,CAAC,CAC5B,GAAM,CAAAW,MAAM,CAAGX,MAAM,CAAC,IAAI,CAAC,CAE3B,IAAAY,SAAA,CAAoCV,QAAQ,CAAC,EAAE,CAAC,CAAAW,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAzCG,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAEhCZ,SAAS,CAAC,UAAM,CACZ,GAAM,CAAAE,IAAI,CAAGc,KAAK,CAACC,IAAI,CAACR,OAAO,CAACS,OAAO,CAACC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,CACnEjB,IAAI,CAACkB,OAAO,CAAC,SAAAC,CAAC,QAAI,CAAAA,CAAC,CAACC,KAAK,CAACC,MAAM,CAAGF,CAAC,CAACG,WAAW,CAAG,IAAI,GAAC,CAC5D,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIC,IAAI,CAAK,CACvB,GAAM,CAAAC,MAAM,CAAGjB,MAAM,CAACQ,OAAO,CAE7B,GAAIQ,IAAI,CAACE,MAAM,GAAKzB,WAAW,CAAC0B,KAAK,CAAEC,QAAQ,CAACC,IAAI,CAACC,SAAS,CAACC,MAAM,CAAC,MAAM,CAAC,CAE7E,GAAIP,IAAI,CAACE,MAAM,GAAKzB,WAAW,CAAC+B,GAAG,CAAE,CACjCC,WAAW,CAACT,IAAI,CAACU,OAAO,CAAC,CAEzB,GAAM,CAAAC,IAAI,CAAGX,IAAI,CAACU,OAAO,GAAK,GAAG,CAAGV,IAAI,CAACU,OAAO,CAAG,GAAG,CACtDrB,aAAa,CAACD,UAAU,CAAGuB,IAAI,CAAC,CACpC,CAEA,GAAIX,IAAI,CAACE,MAAM,GAAKzB,WAAW,CAACmC,MAAM,CAAE,CACpCX,MAAM,CAACY,UAAU,CAACC,aAAa,CAAC,gBAAgB,CAAC,CAACC,SAAS,CAAG,EAAE,CAChEd,MAAM,CAACc,SAAS,CAAG,EAAE,CAErB1B,aAAa,CAAC,EAAE,CAAC,CACrB,CAEA,GAAIW,IAAI,CAACE,MAAM,GAAKzB,WAAW,CAACuC,IAAI,CAAE,CAClC,GAAI5B,UAAU,CAAC6B,IAAI,EAAE,CAACC,MAAM,EAAI,CAAC,CAAE,OAEnCjB,MAAM,CAACY,UAAU,CAACC,aAAa,CAAC,gBAAgB,CAAC,CAACK,MAAM,EAAE,CAE1D,GAAM,CAAAC,SAAS,CAAGnB,MAAM,CAACmB,SAAS,CAAC,IAAI,CAAC,CACxCnB,MAAM,CAACY,UAAU,CAACQ,WAAW,CAACD,SAAS,CAAC,CAExC,GAAM,CAAAE,SAAS,eAAAC,MAAA,CAAiB,EAAEtB,MAAM,CAACuB,YAAY,CAAG,EAAE,CAAC,CAAG,IAAI,gBAAc,CAEhF,GAAI,CACA,GAAI,CAAAC,GAAG,CAAGC,IAAI,CAACtC,UAAU,CAAC,CAE1BC,aAAa,CAACoC,GAAG,CAACE,QAAQ,EAAE,CAAC,CAC7BC,UAAU,CAAC,UAAM,CACbR,SAAS,CAACxB,KAAK,CAAC0B,SAAS,CAAGA,SAAS,CACrCrB,MAAM,CAACc,SAAS,CAAG,EAAE,CACrBN,WAAW,CAACoB,IAAI,CAACC,KAAK,CAACL,GAAG,CAAG,SAAS,CAAC,CAAG,SAAS,CAAC,CACxD,CAAC,CAAE,GAAG,CAAC,CACX,CAAE,MAAAM,OAAA,CAAM,CACJH,UAAU,CAAC,UAAM,CACbR,SAAS,CAACxB,KAAK,CAAC0B,SAAS,CAAGA,SAAS,CACrCF,SAAS,CAACL,SAAS,CAAG,YAAY,CACtC,CAAC,CAAE,GAAG,CAAC,CACX,CAAC,OAAS,CACNiB,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAChC,CACJ,CACJ,CAAC,CAED,GAAM,CAAAxB,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIyB,OAAO,CAAK,CAC7B,GAAM,CAAAjC,MAAM,CAAGjB,MAAM,CAACQ,OAAO,CAC7B,GAAM,CAAA2C,IAAI,CAAG/B,QAAQ,CAACgC,aAAa,CAAC,MAAM,CAAC,CAE3CD,IAAI,CAACpB,SAAS,CAAGmB,OAAO,CACxBC,IAAI,CAACvC,KAAK,CAACyC,OAAO,CAAG,GAAG,CACxBpC,MAAM,CAACoB,WAAW,CAACc,IAAI,CAAC,CAExB,GAAM,CAAAG,KAAK,CAAGH,IAAI,CAACrC,WAAW,CAAG,IAAI,CACrCqC,IAAI,CAACvC,KAAK,CAAC0C,KAAK,CAAG,GAAG,CAEtBV,UAAU,CAAC,UAAM,CACbO,IAAI,CAACvC,KAAK,CAACyC,OAAO,CAAG,GAAG,CACxBF,IAAI,CAACvC,KAAK,CAAC0C,KAAK,CAAGA,KAAK,CAC5B,CAAC,CAAE,GAAG,CAAC,CACX,CAAC,CAED,mBACIzD,KAAA,QAAK0D,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvB3D,KAAA,QAAK0D,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eAC/B7D,IAAA,QAAK8D,GAAG,CAAEzD,MAAO,CAACuD,SAAS,CAAC,yBAAyB,EAAO,cAC5D5D,IAAA,QAAK4D,SAAS,CAAC,yBAAyB,EAAO,GAC7C,cACN5D,IAAA,QAAK8D,GAAG,CAAE1D,OAAQ,CAACwD,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAEvChE,IAAI,CAACkE,GAAG,CAAC,SAAC1C,IAAI,CAAE2C,KAAK,qBACjBhE,IAAA,WAEI4D,SAAS,CAAEvC,IAAI,CAAC4C,KAAM,CACtBC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA9C,QAAQ,CAACC,IAAI,CAAC,EAAC,CAAAwC,QAAA,CAE7BxC,IAAI,CAACU,OAAO,EAJRiC,KAAK,CAKL,EACZ,CAAC,EAEJ,GACJ,CAEd,CAAC,CAED,cAAe,CAAA7D,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}